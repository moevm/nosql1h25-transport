<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
    label { display: block; margin-top: 10px; }
    input, select, textarea { width: 100%; padding: 8px; margin-top: 4px; box-sizing: border-box; }
    button { margin-top: 15px; margin-right: 10px; padding: 8px 15px; cursor: pointer; }
  </style>
</head>
<body>
  <nav>
  <a href="index.html">Заказчики</a> |
  <a href="tc.html">Техника в аренду</a> |
  <a href="rent.html">Аренда</a>
</nav>
<nav>
    <a href="rent_form.html">Добавить/Редактировать транзакцию</a> |
    <a href="rent_import.html">Импорт/Экспорт базы транзакций</a>
</nav>
<h2>Информация о транзакции</h2>

<div id="detailsContainer"></div>

<script>
  function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  const Rent_id = getQueryParam('rent_id');

  if (!Rent_id) {
    document.getElementById('detailsContainer').innerHTML = '<p>Не указан ID.</p>';
  } else {
    // API-запрос для получения данных о технике
    const apiUrl = 'http://localhost:8000/rents/' + encodeURIComponent(Rent_id);
    fetch(apiUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Ошибка при получении данных');
        }
        return response.json();
      })
      .then(data => {
        // Формируем таблицу с данными
        const html = `
          <table>
            <tr><th>ID транзакции</th><td>${data.rent_id}</td></tr>
            <tr><th>Дата начала транзакции</th><td>${data.date_of_begining}</td></tr>
            <tr><th>Дата окончания транзакции</th><td>${data.date_of_ending}</td></tr>
            <tr><th>Ф.И.О. заказчика</th><td>${data.order_name}</td></tr>
            <tr><th>Регистрационный номер ТС</th><td>${data.tc_registration_number}</td></tr>
          </table>
        `;
        document.getElementById('detailsContainer').innerHTML = html;
      })
      .catch(err => {
        document.getElementById('detailsContainer').innerHTML = '<p>Ошибка при получении данных о транзакции.</p>';
        console.error(err);
      });
  }
</script>
</body>
</html>